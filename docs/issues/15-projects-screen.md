### 背景 / 目的

プロジェクト一覧と詳細設定（ルール設定含む）を行う画面を実装する。Issue #5で実装したCRUD機能のUIを完成させ、ルール設定機能を追加する。

- 依存: #4, #5, #8
- ラベル: frontend, ui

### スコープ / 作業項目

1. Projectsページコンポーネントの強化
2. ProjectCardコンポーネントの実装
3. RuleEditorコンポーネントの実装
4. ルール追加モーダルの実装
5. 予算進捗表示

### ゴール / 完了条件（Acceptance Criteria）

- [x] Projectsページコンポーネントの強化（一覧表示、新規作成ボタン）
- [x] ProjectCardコンポーネント（プロジェクト情報、今月の稼働時間、予算進捗）
- [x] ProjectFormコンポーネントの強化（バリデーション、カラーピッカー）
- [x] RuleEditorコンポーネント（/projects/:id/rulesルート）
- [x] ルール追加モーダル（タイプ選択、パターン入力、優先度設定）
- [x] ルールテスト機能のUI（現在の画面でマッチするか確認）
- [x] 予算進捗バー（使用時間/予算時間のパーセンテージ表示）

### テスト観点

- E2Eテスト: ルール作成・編集・削除
- ビジュアルテスト: カード表示、進捗バー
- 検証方法: ルールテスト機能でマッチ確認

検証方法:
1. プロジェクト一覧画面を開く
2. プロジェクトの「ルール設定」をクリック
3. 新しいルールを追加（キーワード: ["テスト"]）
4. テスト機能で現在の画面がマッチするか確認

要確認事項:
- ~~アーカイブプロジェクトの表示切替UI~~ → 実装済み
- ~~プロジェクト並び替え機能の要否~~ → Phase 1では省略

---

## 実装レポート

### 実装日時
2024年12月13日

### 実装内容

#### 1. ProjectCard コンポーネント (`src/components/projects/ProjectCard.tsx`)

プロジェクトカードの分離コンポーネント。

**機能:**
- プロジェクト名、クライアント名、カラー表示
- 今月の作業時間表示
- 予算進捗バー（色分け: 緑/黄/赤）
- アクションメニュー（編集/ルール設定/アーカイブ/削除）

```typescript
interface ProjectCardProps {
  project: Project;
  onEdit: (project: Project) => void;
  onDelete: (project: Project) => void;
  onArchive: (project: Project) => void;
  onManageRules: (project: Project) => void;
}
```

#### 2. RuleEditor コンポーネント (`src/components/projects/RuleEditor.tsx`)

ルール管理用モーダルコンポーネント。

**機能:**
- ルール一覧表示（タイプ、パターン、有効/無効）
- ルール追加フォーム（タイプ選択、パターン入力）
- ルールテスト機能（現在のウィンドウでマッチ確認）
- ルール削除、有効/無効切替

**ルールタイプ:**
- `app_name`: アプリケーション名でマッチ
- `window_title`: ウィンドウタイトルでマッチ（正規表現可）
- `url`: URLでマッチ（正規表現可）
- `keyword`: キーワードを含むかマッチ

#### 3. 予算進捗バー

予算が設定されているプロジェクトで表示。

**色分け:**
- 緑（0-79%）: 順調
- 黄（80-99%）: 注意
- 赤（100%+）: 予算超過

### 作成・更新ファイル一覧

| ファイル | 操作 | 説明 |
|---------|------|------|
| `src/components/projects/ProjectCard.tsx` | 新規 | プロジェクトカード |
| `src/components/projects/RuleEditor.tsx` | 新規 | ルール管理モーダル |
| `src/pages/Projects.tsx` | 更新 | 新コンポーネント統合 |

### 使用方法

```
/projects          - プロジェクト一覧

プロジェクトカード
  - クリック: なし（メニューから操作）
  - メニュー（...）:
    - 編集: プロジェクト情報を編集
    - ルール設定: ルールエディタを開く
    - アーカイブ/復元: プロジェクトをアーカイブ/復元
    - 削除: プロジェクトを削除

ルール設定
  - ルールを追加: タイプとパターンを入力
  - テスト: 現在のウィンドウでマッチするか確認
  - 有効/無効: トグルで切替
  - 削除: ルールを削除
```

### UI/UX特徴

1. **予算進捗の可視化**: 進捗バーで一目で確認
2. **ルールテスト機能**: 追加前にマッチを確認可能
3. **アクションメニュー**: ホバーなしでアクセス可能
4. **今月の作業時間**: リアルタイム集計
